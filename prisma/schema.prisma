  // This is your Prisma schema file,
  // learn more about it in the docs: https://pris.ly/d/prisma-schema

  // Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
  // Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

  generator client {
    provider = "prisma-client-js"
  }

  datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
  }

  enum ActivityType{
    STUDY
    FOOTBALL
    BASKETBALL
    MOVIE
    MEETING
    EAT
  }

  enum PostStatus{
    OPEN
    CLOSED
  }

  model User {
    uid             Int @id @default(autoincrement())
    email           String  @unique
    password        String

    name            String
    studentId       Int  @unique 
    major           String 
    refreshToken    String?
    
    posts           Post[]   @relation("UserPosts")
    joinedPosts     Post[]   @relation("PostParticipants")
  }

  model Post {
    id              Int @id @default(autoincrement())
    author          User @relation("UserPosts", fields: [authorId], references: [uid])
    authorId        Int

    participants    User[]  @relation("PostParticipants")

    activityType    ActivityType
    title           String
    content         String 
    maxParticipants Int
    deadline        DateTime
    status          PostStatus  @default(OPEN)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
  }